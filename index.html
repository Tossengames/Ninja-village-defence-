<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Stealth Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <canvas id="game"></canvas>
    
    <!-- Mission Log (Top Left) - Hidden by default -->
    <div id="missionLog" class="hidden"></div>
    
    <!-- UI Controls (Top Right) -->
    <div id="ui-controls" class="hidden">
        <button id="mapToggle" onclick="toggleMinimap()">Toggle Map</button>
    </div>
    
    <!-- Toolbar (Bottom Center) - FIXED POSITION -->
    <div id="toolbar" class="hidden">
        <!-- Status Indicator Circle (Left side - fixed) -->
        <div id="playerStatus" class="status-circle stealth">
            <div class="status-emoji">ü•∑</div>
            <div class="status-glow"></div>
        </div>
        
        <div class="tool-btn" id="btnMove" onclick="setMode('move')">
            <span>üë£</span>
            Move
        </div>
        <div class="tool-btn" id="btnAttack" onclick="setMode('attack')">
            <span>‚öîÔ∏è</span>
            Attack
        </div>
        <div class="tool-btn" id="btnTrap" onclick="setMode('trap')">
            <span>‚ö†Ô∏è</span>
            Trap
            <div class="tool-count" id="trapCount">3</div>
        </div>
        <div class="tool-btn" id="btnRice" onclick="setMode('rice')">
            <span>üçö</span>
            Rice
            <div class="tool-count" id="riceCount">2</div>
        </div>
        <div class="tool-btn" id="btnBomb" onclick="setMode('bomb')">
            <span>üí£</span>
            Bomb
            <div class="tool-count" id="bombCount">1</div>
        </div>
        <div class="tool-btn" id="btnGas" onclick="setMode('gas')">
            <span>üí®</span>
            Gas
            <div class="tool-count" id="gasCount">2</div>
        </div>
        <div class="tool-btn" onclick="playerWait()">
            <span>‚è≥</span>
            Wait
        </div>
    </div>
    
    <!-- Main Menu -->
    <div id="menu" class="overlay-screen">
        <div class="menu-box">
            <h1>STEALTH GAME</h1>
            <div class="menu-item">
                <label>Map Size:</label>
                <input type="number" id="mapSize" min="8" max="20" value="12">
            </div>
            <div class="menu-item">
                <label>Guard Count:</label>
                <input type="number" id="guardCount" min="1" max="15" value="5">
            </div>
            <button class="start-btn" onclick="initGame()">START MISSION</button>
        </div>
    </div>
    
    <!-- Victory Screen (Tenchu-style) -->
    <div id="resultScreen" class="overlay-screen hidden">
        <div class="result-scroll">
            <h1>MISSION COMPLETE</h1>
            <div class="rank-text" id="rankLabel">RANK</div>
            <div id="statsTable"></div>
            <button class="reload-btn" onclick="window.location.reload()">NEW MISSION</button>
        </div>
    </div>
    
    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="overlay-screen hidden">
        <div class="result-scroll">
            <h1>MISSION FAILED</h1>
            <div class="fail-text">You have been defeated.<br>Better luck next time!</div>
            <button class="reload-btn" onclick="window.location.reload()">TRY AGAIN</button>
        </div>
    </div>
    
    <script src="core_main.js"></script>
    <script src="core_vfx.js"></script>
    <script src="core_highlight.js"></script>
    <script src="player.js"></script>
    <script src="enemy.js"></script>
</body>
</html>